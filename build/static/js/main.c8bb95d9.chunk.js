(this["webpackJsonpknishka-apishka"]=this["webpackJsonpknishka-apishka"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(10),a=n.n(r),i=(n(15),n(2)),o=n(3),l=n(6),u=n(5),h=n(4),d=n(7),j=n.n(d),b=n(9),p=function(){function e(){Object(i.a)(this,e),this._apiSearch="http://openlibrary.org/search.json?q=",this._baseApi="https://openlibrary.org"}return Object(o.a)(e,[{key:"getSingleBook",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._baseApi).concat(t,".json"));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch data, recieved ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSearchRes",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiSearch).concat(t,"&page=1"));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch data, recieved ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),f=(n(17),n(18),n(19),n(0)),v=function(){return Object(f.jsx)("div",{className:"loadingio-spinner-magnify-mzmsqh4538e",children:Object(f.jsx)("div",{className:"ldio-4q93eu97sb",children:Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})})})})},m=n.p+"static/media/book-template.aeb8aa3d.png",O=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).getBook=new p,e.state={bookList:null},e.notTooMuch=function(e,t){return(e=e.trim()).length<=t?e:(e=e.slice(0,t)).trim()+"..."},e.renderIt=function(t){return t?t.map((function(t){var n=e.notTooMuch(t.title,20),s=t.author_name?t.author_name.toString():"\u041d\u0435 \u043d\u0430\u0448\u043b\u043e\u0441\u044c",c=e.notTooMuch(s,20),r=t.isbn?t.isbn[t.isbn.length-1]:"\u041d\u0435 \u043d\u0430\u0448\u043b\u043e\u0441\u044c",a=e.checkImg(t.cover_edition_key);return Object(f.jsxs)("div",{className:"single-card",onClick:function(){return e.props.getBookId(t.key,s,t.first_publish_year,r)},children:[Object(f.jsx)("img",{className:"card-img",src:a,alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u043f\u043e\u043b\u043e\u043c\u0430\u043b\u0430\u0441\u044c"}),Object(f.jsxs)("ul",{className:"content-table",children:[Object(f.jsx)("li",{children:Object(f.jsxs)("span",{children:[" ","\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438:  ".concat(n)]})}),Object(f.jsx)("li",{children:Object(f.jsxs)("span",{children:[" ","\u0418\u043c\u0435\u043d\u0430 \u0430\u0432\u0442\u043e\u0440\u043e\u0432:  ".concat(c)," "]})}),Object(f.jsx)("li",{children:Object(f.jsxs)("span",{children:[" ","\u0413\u043e\u0434 \u0438\u0437\u0434\u0430\u043d\u0438\u044f: ".concat(t.first_publish_year)," "]})})]})]},t.key)})):"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.searchField!==e.searchField&&this.updateBook()}},{key:"updateBook",value:function(){var e=this,t=this.props.searchField;t&&(this.setState({bookList:null}),this.getBook.getSearchRes(t).then((function(t){e.setState({bookList:t.docs})})))}},{key:"checkImg",value:function(e){return e?"http://covers.openlibrary.org/b/OLID/".concat(e,"-M.jpg"):m}},{key:"render",value:function(){if(!this.props.searchField)return null;if(!this.state.bookList)return Object(f.jsx)(v,{});var e=this.state.bookList,t=this.renderIt(e);return Object(f.jsx)("div",{className:"cards-nest",children:t})}}]),n}(s.Component),k=(n(21),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={tearm:"",isSend:!1},e.typingTimer=null,e.onImput=function(t){t.preventDefault();var n=t.target.value;e.setState({tearm:n}),clearTimeout(e.typingTimer),e.typingTimer=setTimeout((function(){n&&e.onSubmit()}),1e3)},e.onSubmit=function(){var t=e.state.tearm;""!==t&&(e.props.getSearchRes(t),e.setState({tearm:""}))},e}return Object(o.a)(n,[{key:"componentWillUnmount",value:function(){clearTimeout(this.typingTimer)}},{key:"render",value:function(){var e=this.state.tearm;return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("h1",{className:"title",children:" \u041a\u041d\u0418\u0416\u041a\u0410 API-\u0428\u041a\u0410 "}),Object(f.jsxs)("div",{className:"search-block",children:[Object(f.jsx)("input",{type:"text",className:"text-field",onChange:this.onImput,value:e}),Object(f.jsx)("input",{className:"submit-button",type:"submit",onClick:this.onSubmit,value:"\u041f\u043e\u0438\u0441\u043a"})]})]})}}]),n}(s.Component)),g=(n(22),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).getBook=new p,e.state={book:null,visible:!1},e.hideModal=function(){e.setState({visible:!1,book:null}),e.props.onHide()},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.seletedBook!==e.seletedBook&&this.updateSelected()}},{key:"updateSelected",value:function(){var e=this,t=this.props.seletedBook;t&&(this.setState({visible:!0}),this.getBook.getSingleBook(t).then((function(t){e.setState({book:t,loading:!1})})))}},{key:"checkValue",value:function(e){return e?e.value?e.value:e:"\u041d\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f"}},{key:"checkImg",value:function(e){return e?"http://covers.openlibrary.org/b/id/".concat(e[0],"-L.jpg"):m}},{key:"render",value:function(){var e=this;if(!this.props.seletedBook&&!this.state.visible)return null;if(!this.state.book)return Object(f.jsx)("div",{className:"test",children:Object(f.jsx)(v,{})});var t=this.state.book,n=t.description,s=t.covers,c=t.title,r=this.props,a=r.selectedAuthour,i=r.selectedYear,o=r.selectedISBN,l=this.checkValue(n),u=this.checkImg(s);return Object(f.jsx)("div",{className:"modal-body",onClick:function(){e.hideModal()},children:Object(f.jsxs)("div",{className:"modal-card",children:[Object(f.jsxs)("h1",{children:["  ",c]}),Object(f.jsxs)("div",{className:"wrapper",children:[Object(f.jsx)("img",{src:u,alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 \u043f\u043e\u043b\u043e\u043c\u0430\u043b\u0430\u0441\u044c",className:"modal-img"}),Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsxs)("span",{className:"bigger-stuff",children:["\u0410\u0432\u0442\u043e\u0440: ".concat(a)," "]})}),Object(f.jsx)("li",{children:Object(f.jsxs)("span",{className:"bigger-stuff",children:["\u0413\u043e\u0434 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438: ".concat(i)," "]})}),Object(f.jsx)("li",{children:Object(f.jsx)("span",{className:"bigger-stuff",children:"ISBN: ".concat(o)})})]})]}),Object(f.jsxs)("span",{children:[" ",l]})]})})}}]),n}(s.Component)),x=(n(23),function(){return Object(f.jsxs)("div",{className:"error-msg",children:[Object(f.jsx)("h2",{className:"red",children:" \u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(f.jsx)("h2",{children:" \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})]})}),y=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(o.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(f.jsx)(x,{}):this.props.children}}]),n}(s.Component),S=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).getBook=new p,s.hideModal=function(){s.setState({selectedId:null,selectedAuthour:null,selectedYear:null,selectedISBN:null})},s.getSearchRes=function(e){s.setState({searchField:e})},s.getBookId=function(e,t,n,c){s.setState({selectedId:e,selectedAuthour:t,selectedYear:n,selectedISBN:c})},s.state={searchField:"",selectedId:null,selectedAuthour:null,selectedYear:null,selectedISBN:null,error:!1},s.hideModal=s.hideModal.bind(Object(l.a)(s)),s.getSearchRes=s.getSearchRes.bind(Object(l.a)(s)),s.getBookId=s.getBookId.bind(Object(l.a)(s)),s}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(k,{getSearchRes:this.getSearchRes}),Object(f.jsxs)(y,{children:[Object(f.jsx)(O,{getBookId:this.getBookId,searchField:this.state.searchField,onError:this.onError}),Object(f.jsx)(g,{seletedBook:this.state.selectedId,selectedAuthour:this.state.selectedAuthour,selectedYear:this.state.selectedYear,selectedISBN:this.state.selectedISBN,onHide:this.hideModal,onError:this.onError})]})]})}}]),n}(s.Component);a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(S,{})}),document.getElementById("root"))}],[[24,1,2]]]);
//# sourceMappingURL=main.c8bb95d9.chunk.js.map