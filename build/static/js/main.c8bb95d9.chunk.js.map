{"version":3,"sources":["services/getBook.js","spinner/index.js","spinner/spinner.js","img/book-template.png","card/index.js","card/card.js","header/index.js","header/header.js","modal/modal.js","error/index.js","error/error.js","errorBoundary/errorBoundary.js","app/index.js","app/App.js","index.js"],"names":["GetBooks","this","_apiSearch","_baseApi","url","a","fetch","res","ok","Error","status","json","Spinner","className","BookCard","getBook","state","bookList","notTooMuch","text","limit","trim","length","slice","renderIt","arr","map","item","shownTitle","title","originalName","author_name","toString","ShownName","isbn","img","checkImg","cover_edition_key","onClick","props","getBookId","key","first_publish_year","src","alt","prevProp","searchField","updateBook","setState","getSearchRes","then","docs","deafaultImg","list","test","Component","SearchPannel","tearm","isSend","typingTimer","onImput","e","preventDefault","target","value","clearTimeout","setTimeout","onSubmit","type","onChange","Modal","book","visible","hideModal","onHide","seletedBook","updateSelected","getSingleBook","loading","description","covers","selectedAuthour","selectedYear","selectedISBN","checkValue","ErrorMsg","ErrorBoundary","hasError","children","App","selectedId","resId","resName","resYear","resISBN","error","bind","onError","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c8bb95d9.chunk.js","sourcesContent":["export default class GetBooks {\n  constructor() {\n    this._apiSearch = `http://openlibrary.org/search.json?q=`\n    this._baseApi = `https://openlibrary.org`\n  }\n\n\n  async getSingleBook(url) {\n     const res = await fetch(`${this._baseApi}${url}.json`)\n    if (!res.ok) {\n      throw new Error(`Could not fetch data, recieved ${res.status}`)\n    }\n    return await res.json()\n  }\n\n\n  async getSearchRes(url) {\n       const res = await fetch(`${this._apiSearch}${url}&page=1`)\n    if (!res.ok) {\n      throw new Error(`Could not fetch data, recieved ${res.status}`)\n    }\n    return await res.json()\n  }\n\n}","import Spinner from \"./spinner\";\nexport default Spinner","import React from 'react'\nimport './spinner.css'\n\nconst Spinner = ()=>{\n return(\n<div className=\"loadingio-spinner-magnify-mzmsqh4538e\"><div className=\"ldio-4q93eu97sb\">\n<div><div>\n <div></div>\n <div></div>\n </div></div>\n</div></div>\n)\n} \nexport default Spinner","export default __webpack_public_path__ + \"static/media/book-template.aeb8aa3d.png\";","import BookCard from \"./card\";\nexport default BookCard","import React, { Component } from 'react'\nimport GetBooks from '../services/getBook'\nimport './card.css'\nimport Spinner from '../spinner'\nimport deafaultImg from '../img/book-template.png'\n\n\nexport default class BookCard extends Component {\n\n  getBook = new GetBooks()\n\n  state = {\n    bookList: null\n  }\n\n\n\n  componentDidUpdate(prevProp) {\n    if (this.props.searchField !== prevProp.searchField) {\n      this.updateBook()\n    }\n  }\n\n  updateBook() {\n    const { searchField } = this.props\n    if (!searchField) { return }\n    this.setState({ bookList: null })\n    this.getBook.getSearchRes(searchField).then((bookList) => { this.setState({ bookList: bookList.docs }) }\n    )\n  }\n  checkImg(img) {\n    if (img) return (`http://covers.openlibrary.org/b/OLID/${img}-M.jpg`)\n    else return (deafaultImg)\n  }\n\n  notTooMuch = (text, limit) => {\n    text = text.trim();\n    if (text.length <= limit) return text;\n\n    text = text.slice(0, limit);\n\n    return text.trim() + \"...\";\n  }\n  renderIt = (arr) => {\n    if (!arr) return (`Ничего не найдено`)\n    else\n      return (arr.map((item) => {\n        const shownTitle = this.notTooMuch(item.title, 20)\n        const originalName = item.author_name ? item.author_name.toString() : \"Не нашлось\"\n        const ShownName = this.notTooMuch(originalName, 20)\n        const isbn = item.isbn ? item.isbn[(item.isbn.length - 1)] : \"Не нашлось\"\n        const img = this.checkImg(item.cover_edition_key)\n        return (<div key={item.key} className=\"single-card\" onClick={() => this.props.getBookId(item.key, originalName, item.first_publish_year, isbn)}>\n          <img className=\"card-img\" src={img} alt='Обложка поломалась' />\n          <ul className=\"content-table\">\n            <li>\n              <span> {`Название книги:  ${shownTitle}`}</span>\n            </li>\n            <li>\n              <span> {`Имена авторов:  ${ShownName}`} </span>\n            </li>\n            <li>\n              <span> {`Год издания: ${item.first_publish_year}`} </span>\n            </li>\n          </ul>\n        </div>\n        )\n      }))\n  }\n\n\n  render() {\n\n    if (!this.props.searchField) {\n      return null\n    } else if (!this.state.bookList) { return <Spinner /> }\n    const list = this.state.bookList\n    const test = this.renderIt(list)\n    return (\n      <div className=\"cards-nest\">\n        {test}\n      </div>\n    )\n  }\n}","import SearchPannel from './header'\nexport default SearchPannel","import React, { Component } from 'react'\nimport './header.css'\n\n\nexport default class SearchPannel extends Component {\n\n  state = {\n    tearm: '',\n    isSend: false\n  }\n\n  typingTimer = null;\n\n\n  onImput = (e) => {\n    e.preventDefault();\n    const tearm = e.target.value;\n    this.setState({ tearm });\n    clearTimeout(this.typingTimer);\n    this.typingTimer = setTimeout(() => {\n      if (tearm) {\n        this.onSubmit();\n      }\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.typingTimer);\n  }\n\n  onSubmit = () => {\n    const { tearm } = this.state;\n    if (tearm !== '') {\n      this.props.getSearchRes(tearm)\n      this.setState({\n        tearm: ''\n      })\n    }\n  }\n\n  render() {\n    const { tearm } = this.state;\n    return (\n      <div className=\"header\">\n        < h1 className=\"title\" > КНИЖКА API-ШКА </h1>\n        <div className=\"search-block\">\n          <input type=\"text\" className=\"text-field\" onChange={this.onImput} value={tearm} />\n          <input className=\"submit-button\" type=\"submit\" onClick={this.onSubmit} value=\"Поиск\" />\n        </div>\n      </div>\n    )\n  }\n\n}","import React, { Component } from 'react'\nimport GetBooks from '../services/getBook';\nimport './modal.css'\nimport Spinner from '../spinner/';\nimport deafaultImg from '../img/book-template.png'\n\nexport default class Modal extends Component {\n    getBook = new GetBooks()\n    state = {\n        book: null,\n        visible: false,\n\n    }\n\n\n    componentDidUpdate(prevProp) {\n        if (this.props.seletedBook !== prevProp.seletedBook) {\n            this.updateSelected()\n        }\n    }\n\n\n    updateSelected() {\n        const {\n            seletedBook\n        } = this.props\n        if (!seletedBook) {\n            return\n        }\n        this.setState({ visible: true })\n        this.getBook.getSingleBook(seletedBook).then((book) => {\n            this.setState({ book: book, loading: false })\n        })\n    }\n\n    checkValue(item) {\n        if (!item) {\n            return \"Нет описания\"\n        } else if (item.value) {\n            return item.value\n        } else {\n            return item\n        }\n    }\n\n    checkImg(img) {\n        if (!img) return (deafaultImg)\n        else return (`http://covers.openlibrary.org/b/id/${img[0]}-L.jpg`)\n\n    }\n    hideModal = () => {\n        this.setState({ visible: false, book: null })\n        this.props.onHide()\n    }\n\n\n    render() {\n        if (!this.props.seletedBook && !this.state.visible) {\n            return null\n        } else if (!this.state.book) { return <div className=\"test\"><Spinner /></div> }\n\n        const { description, covers, title } = this.state.book\n        const { selectedAuthour, selectedYear, selectedISBN } = this.props\n        let text = this.checkValue(description)\n        const img = this.checkImg(covers)\n       \n        return (\n            <div className=\"modal-body\" onClick={() => { this.hideModal() }} >\n                <div className=\"modal-card\" >\n                    <h1>  {title}</h1>\n                    <div className=\"wrapper\">\n                        < img src={img} alt='Обложка поломалась' className=\"modal-img\" />\n                        <ul><li>\n                            <span className=\"bigger-stuff\">{`Автор: ${selectedAuthour}`} </span>\n                        </li>\n                            <li>\n                                <span className=\"bigger-stuff\">{`Год публикации: ${selectedYear}`} </span>\n                            </li>\n                            <li>\n                                <span className=\"bigger-stuff\">{`ISBN: ${selectedISBN}`}</span>\n                            </li>\n                        </ul>\n                    </div>\n                    <span> {text}\n                    </span>\n                </div>\n            </div>\n        )\n    }\n}\n","import ErrorMsg from \"./error\";\r\nexport default ErrorMsg","import React from 'react';\r\n\r\nimport './error.css'\r\n\r\nconst ErrorMsg = () => {\r\n return (\r\n  <div className=\"error-msg\">\r\n   <h2 className=\"red\"> Произошла ошибка</h2>\r\n   <h2> Обновите приложение</h2>\r\n  </div>\r\n )\r\n}\r\nexport default ErrorMsg","import React, { Component } from 'react';\r\n\r\nimport ErrorMsg from '../error';\r\n\r\nexport default class ErrorBoundary extends Component {\r\n\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({\r\n      hasError: true\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n    if (this.state.hasError) {\r\n      return <ErrorMsg/>\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}","import App from \"./App\";\nexport default App","import React, { Component } from 'react';\nimport GetBooks from '../services/getBook';\nimport './App.css';\nimport BookCard from '../card';\nimport SearchPannel from '../header';\nimport Modal from '../modal/modal';\nimport ErrorBoundary from '../errorBoundary/errorBoundary';\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n\n      searchField: '',\n      selectedId: null,\n      selectedAuthour: null,\n      selectedYear: null,\n      selectedISBN: null,\n      error: false\n    }\n    this.hideModal = this.hideModal.bind(this)\n    this.getSearchRes = this.getSearchRes.bind(this)\n    this.getBookId = this.getBookId.bind(this)\n    \n  }\n  getBook = new GetBooks();\n\n\n\n  hideModal = () => {\n    this.setState({\n      selectedId: null,\n      selectedAuthour: null,\n      selectedYear: null,\n      selectedISBN: null,\n    })\n  }\n\n  getSearchRes = (res) => {\n    this.setState({ searchField: res })\n  }\n\n  getBookId = (resId, resName, resYear, resISBN) => {\n    this.setState({\n      selectedId: resId,\n      selectedAuthour: resName,\n      selectedYear: resYear,\n      selectedISBN: resISBN\n    })\n  }\n\n  render() {\n   \n\n    return (\n      <div className=\"App\">\n        <SearchPannel getSearchRes={this.getSearchRes} />\n        <ErrorBoundary>\n        <BookCard getBookId={this.getBookId} searchField={this.state.searchField} onError={this.onError}/>\n\n        <Modal seletedBook={this.state.selectedId} selectedAuthour={this.state.selectedAuthour} selectedYear={this.state.selectedYear} selectedISBN={this.state.selectedISBN} onHide={this.hideModal} onError={this.onError}/>\n        </ErrorBoundary>\n      </div>\n      \n\n\n    );\n  }\n\n}\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './app'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n\n"],"sourceRoot":""}